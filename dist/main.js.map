{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.js","webpack:///./src/scripts/map.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ctx","gameMap","currentSecond","frameCount","heldKeys","65","87","68","83","13","directions","floorTypes","tileTypes","0","color","floor","sprite","x","y","w","h","1","2","4","5","6","7","8","9","10","11","12","14","15","16","17","18","19","20","21","22","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","collisions","objectTypes","offset","collision","zIndex","3","itemTypes","maxStack","Stack","id","qty","this","type","Inventory","spaces","stacks","PlacedItemStack","addItems","length","maxHere","push","placeAt","nx","ny","mapTileData","map","toIndex","itemStack","gametile","artLoaded","miumiu","MiuMiu","tileFrom","tileTo","timeMoved","delayMove","dimensions","position","direction","sprites","inventory","location","processMovement","eventEnter","difference","Math","round","placesCanGo","canGoUp","canGoDown","canGoLeft","canGoRight","goLeft","goRight","goUp","goDown","pickUp","is","remains","camera","screen","startingPoint","endingPoint","update","offsetX","offsetY","tile","ceil","mapWidth","mapHeight","TileMap","buildingsLocation","data","Tile","tileX","tileY","tileType","building","buildingType","levels","GameObjects","nt","getFrame","timeLast","time","animation","end","drawGame","currentFrameTime","Date","now","sec","miumiuBuilding1","miumiuBuilding2","fillStyle","fillRect","z","drawImage","objectSprite","objectType","spritetimeLast","textAlign","it","fillText","alert","document","reload","clearInterval","interval","requestAnimationFrame","buildMapFromData","tileId","addBuildings","buildings","tileIdx","window","onload","getElementById","getContext","addEventListener","e","keyCode","width","height","Image","onerror","src","console","log"],"mappings":"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,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAClG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAClG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAClG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3F,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC9F,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3F,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACvF,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAA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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import \"./styles/index.scss\";\nimport \"./scripts/map\";\n\n\n\n","// i want a camera following the char around the map\n\n\nlet ctx = null;\n\n// create a map with 10*10 tile\nlet gameMap = [\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 0, 0, 0, 0, 6, 5, 5, 7, 0, 26, 25, 25, 25, 25, 25, 27, 0, 0, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 21, 20, 20, 22, 1, 29, 28, 28, 28, 28, 28, 30, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 21, 20, 20, 22, 1, 29, 28, 28, 28, 28, 28, 30, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 21, 20, 20, 22, 1, 29, 28, 28, 28, 28, 28, 30, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 16, 20, 16, 18, 1, 16, 18, 16, 19, 28, 18, 18, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 2, 2, 2, 2, 31, 32, 33, 34, 2, 2, 2, 2, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 2, 2, 2, 2, 35, 36, 37, 38, 2, 2, 2, 2, 2, 2, 2, 0, 4, 4, 4, 4,\n    4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 2, 2, 2, 2, 39, 40, 41, 42, 2, 2, 2, 2, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 2, 2, 2, 2, 16, 36, 16, 18, 2, 2, 2, 2, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 8, 8, 8, 8, 8, 9, 8, 8, 8, 8, 8, 8, 8, 9, 8, 8, 8, 8, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 8, 8, 8, 8, 8, 8, 8, 8, 9, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 0, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 0, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n\t4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,\n];\n\n// 每个地砖多少pixel\nlet tileWidth = 40;\nlet tileHeight = 40;\n// 地图大小就是20*20\nlet mapWidth = 30;\nlet mapHeight = 30;\n// framerate\nlet currentSecond = 0;\nlet frameCount = 0;\nlet framesLastSecond = 0;\nlet lastFrameTime = 0;\n\n\n// keyCode : boolean to tell us which one are pressed\nlet heldKeys = {\n    // 37: left\n    65 : false,\n    // 38: up\n    87 : false,\n    // 39: right\n    68 : false,\n    // 40: down\n    83 : false,\n\t// 32: space\n\t13 : false\n};\n\nlet directions = {\n\tup\t: 0,\n\tright: 1,\n\tdown: 2,\n\tleft: 3\n};\n\n\n// 地板种类\nlet floorTypes = {\n    solid: 0,\n    path: 1,\n    ocean: 2\n};\n\n// 数字（gameMap）对应上颜色和地板种类\n// 0:墙壁 1:草地 2:陆地  4: 水  \n// 5:黄色内部墙壁 6: 黄色内部墙壁左角 7:黄色内部墙壁右角\n// 8: 沙滩 9:沙滩2\n// 20:黄色内部地板 21:黄色内部墙左 22:黄色内部墙右\n// 25:棕色内部墙壁 26:棕色内部墙壁左角 27: 棕色内部墙壁右角\n// 28: 棕色内部地板 29: 棕色内部墙左 30:棕色内部墙右\n// 10-19 房子外观\n// 31-42 miumiu room\nlet tileTypes = {\n\t0 : { color: \"#793d4c\", floor: floorTypes.solid, sprite:[{x:0,y:0,w:40,h:40}] },\n\t1 : { color: \"#6df7b1\", floor: floorTypes.path, sprite:[{x:40,y:0,w:40,h:40}] },\n\t2 : { color: \"#c97461\", floor: floorTypes.path, sprite:[{x:80,y:0,w:40,h:40}]\t},\n    4 : { color: \"#008df0\", floor: floorTypes.ocean, sprite:[{x:160,y:0,w:40,h:40}] },\n    5 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:120,y:0,w:40,h:40}] },\n    6 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:120,y:40,w:40,h:40}] },\n    7 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:80,y:40,w:40,h:40}] },\n    8 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:200,y:0,w:40,h:40}] },\n    9 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:200,y:40,w:40,h:40}] },\n\n\t\n    10 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:240,y:40,w:40,h:40}]},\n    11 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:280,y:40,w:40,h:40}]},\n    12 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:320,y:40,w:40,h:40}]},\n    13 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:240,y:80,w:40,h:40}]},\n    14 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:280,y:80,w:40,h:40}]},\n    15 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:320,y:80,w:40,h:40}]},\n    16 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:240,y:120,w:40,h:40}]},\n    17 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:280,y:120,w:40,h:40}]},\n    18 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:320,y:120,w:40,h:40}]},\n    19 : { color:\"#ccaa00\", floor:floorTypes.solid, sprite:[{x:360,y:120,w:40,h:40}]},\n    \n    20 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:40,y:40,w:40,h:40}]},\n    21 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:80,y:80,w:40,h:40}]},\n    22 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:120,y:80,w:40,h:40}]},\n\n    25 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:320,y:160,w:40,h:40}]},\n    26 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:240,y:160,w:40,h:40}]},\n    27 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:280,y:160,w:40,h:40}]},\n    28 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:280,y:200,w:40,h:40}]},\n    29 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:360,y:160,w:40,h:40}]},\n    30 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:240,y:200,w:40,h:40}]},\n\n    31 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:320,y:200,w:40,h:40}]},\n    32 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:360,y:200,w:40,h:40}]},\n    33 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:400,y:200,w:40,h:40}]},\n    34 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:440,y:200,w:40,h:40}]},\n    35 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:320,y:240,w:40,h:40}]},\n    36 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:360,y:240,w:40,h:40}]},\n    37 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:400,y:240,w:40,h:40}]},\n    38 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:440,y:240,w:40,h:40}]},\n    39 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:320,y:280,w:40,h:40}]},\n    40 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:360,y:280,w:40,h:40}]},\n    41 : { color: \"#d77c4b\", floor: floorTypes.path, sprite:[{x:400,y:280,w:40,h:40}]},\n    42 : { color: \"#d77c4b\", floor: floorTypes.solid, sprite:[{x:440,y:280,w:40,h:40}]},\n\n\n    \n};\n\nlet collisions = {\n\tnone\t\t: 0,\n\tsolid\t\t: 1\n};\n\nlet objectTypes = {\n\t1 : {\n\t\tname : \"Flower\",\n\t\tsprite : [{x:40,y:180,w:40,h:20}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.none,\n\t\tzIndex : 1\n\t},\n\t2 : {\n\t\tname : \"fence\",\n\t\tsprite : [{x:40,y:200,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n\t},\n\t3 : {\n\t\tname : \"Tree\",\n\t\tsprite : [{x:80,y:160,w:80,h:80}],\n\t\toffset : [-20,-20],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 3\n    },\n    4 : {\n\t\tname : \"mashrooms\",\n\t\tsprite : [{x:40,y:160,w:40,h:20}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.none,\n\t\tzIndex : 1\n    },\n    5 : {\n\t\tname : \"Pig Shop\",\n\t\tsprite : [{x:160,y:160,w:80,h:80}],\n\t\toffset : [-20,-20],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 3\n    },\n    6 : {\n\t\tname : \"donuts\",\n\t\tsprite : [{x:360,y:0,w:80,h:115}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.none,\n\t\tzIndex : 1\n    },\n    7 : {\n\t\tname : \"cooking\",\n\t\tsprite : [{x:160,y:80,w:80,h:80}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.none,\n\t\tzIndex : 1\n    },\n    8 : {\n\t\tname : \"carpet\",\n\t\tsprite : [{x:0,y:80,w:80,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.none,\n\t\tzIndex : 1\n    },\n    9 : {\n\t\tname : \"desk\",\n\t\tsprite : [{x:0,y:40,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    10 : {\n\t\tname : \"chair\",\n\t\tsprite : [{x:320,y:0,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    11 : {\n\t\tname : \"Tree Plant\",\n\t\tsprite : [{x:40,y:120,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    12 : {\n\t\tname : \"drum\",\n\t\tsprite : [{x:0,y:240,w:80,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    13 : {\n\t\tname : \"instruments\",\n\t\tsprite : [{x:80,y:240,w:120,h:80}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    14 : {\n\t\tname : \"BookShelf\",\n\t\tsprite : [{x:200,y:240,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    15 : {\n\t\tname : \"saxophone\",\n\t\tsprite : [{x:240,y:240,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n    16 : {\n\t\tname : \"Right Facing Chair\",\n\t\tsprite : [{x:200,y:280,w:40,h:40}],\n\t\toffset : [0,0],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n\t},\n\t17 : {\n\t\tname : \"coconut tree\",\n\t\tsprite : [{x:440,y:0,w:80,h:80}],\n\t\toffset : [-20,-20],\n\t\tcollision : collisions.solid,\n\t\tzIndex : 1\n    },\n};\n\n\n// 物品\nlet itemTypes = {\n    1 : {\n\t\tname : \"coconut\",\n\t\tmaxStack : 5,\n\t\tsprite : [{x:240,y:0,w:40,h:40}],\n\t\toffset : [0,0]\n    },\n    2 : {\n\t\tname : \"strawberry\",\n\t\tmaxStack : 5,\n\t\tsprite : [{x:280,y:0,w:40,h:40}],\n\t\toffset : [0,0]\n\t}\n};\n\nfunction Stack(id, qty)\n{\n\tthis.type = id;\n\tthis.qty = qty;\n}\n\nfunction Inventory(s)\n{\n\tthis.spaces\t\t= s;\n\tthis.stacks\t\t= [];\n}\n\nInventory.prototype.addItems = function(id, qty)\n{\n\tfor(let i = 0; i < this.spaces; i++)\n\t{ \n\t\tif(this.stacks.length <= i)\n\t\t{\n\t\t\tlet maxHere = (qty > itemTypes[id].maxStack ?\n\t\t\t\titemTypes[id].maxStack : qty);\n\t\t\t\tthis.stacks.push(new Stack(id, maxHere));\n\t\t\t\n\t\t\tqty-= maxHere;\n\t\t}\n\t\telse if(this.stacks[i].type == id &&\n\t\t\tthis.stacks[i].qty < itemTypes[id].maxStack)\n\t\t{\n\t\t\tlet maxHere = (itemTypes[id].maxStack - this.stacks[i].qty);\n\t\t\tif(maxHere > qty) { maxHere = qty; }\n\t\t\t\n\t\t\tthis.stacks[i].qty += maxHere;\n\t\t\tqty -= maxHere;\n\t\t}\n\t\tif( qty == 0 ) { return 0; }\n\t}\n\treturn qty;\n};\n\n\nfunction PlacedItemStack(id, qty)\n{\n\tthis.type = id;\n\tthis.qty = qty;\n\tthis.x = 0;\n\tthis.y = 0;\n}\n\nPlacedItemStack.prototype.placeAt = function(nx, ny)\n{\n\tif(mapTileData.map[toIndex(this.x, this.y)].itemStack==this)\n\t{\n\t\tmapTileData.map[toIndex(this.x, this.y)].itemStack = null;\n\t}\n\n\tthis.x = nx;\n\tthis.y = ny;\n\t\n\tmapTileData.map[toIndex(nx, ny)].itemStack = this;\n};\n\n\n\n\nlet gametile = null, gametileURL = \"src/images/tilesetestt.png\", artLoaded = false;\n\n\n\n// 创建一个角色 (miumiu)\nlet miumiu = new MiuMiu();\n// 加更多角色⬇\nfunction MiuMiu() {\n    this.tileFrom\t= [1,1];\n    // miumiu的位置\n    this.tileTo\t\t= [15,16];\n    // time in millseconds\n    this.timeMoved\t= 0;\n    this.delayMove\t= 700;\n\tthis.dimensions\t= [40,40];\n    this.position\t= [45,45];\n    \n    this.direction\t= directions.up;\n\tthis.sprites = {};\n\tthis.sprites[directions.up]\t= [{x:0,y:120,w:30,h:30}];\n\tthis.sprites[directions.right] = [{x:0,y:150,w:30,h:30}];\n\tthis.sprites[directions.down] = [{x:0,y:180,w:30,h:30}];\n\tthis.sprites[directions.left] = [{x:0,y:210,w:30,h:30}];\n\tthis.inventory = new Inventory(2);\n\n}\n\n\n// 把角色放在地砖上\nMiuMiu.prototype.location = function(x, y) {\n\tthis.tileFrom\t= [x,y];\n    this.tileTo\t\t= [x,y];\n    // x and y position of the tile. update the tileFrom and tileTo properties to the new tile coordinates\n    // calculates the pixel position of the characyer use below\n\tthis.position\t= [(( tileWidth * x )+( (tileWidth - this.dimensions[0]) / 2 )),\n\t\t(( tileHeight * y )+( (tileHeight - this.dimensions[1]) / 2 ))];\n};\n\n// 根据每个帧数找到角色位置\nMiuMiu.prototype.processMovement = function(t) {\n    // if char tileTo == tileFrom char is not moving, so return false\n\tif( this.tileFrom[0] == this.tileTo[0] && this.tileFrom[1] == this.tileTo[1]) { return false; }\n    // if the amount of time passed since char began its current move >= the time for char to move 1 tile. we set position using location function\n    // aka: if char still moving\n\tif((t - this.timeMoved) >= this.delayMove) {\n        this.location(this.tileTo[0], this.tileTo[1]);\n        if(mapTileData.map[toIndex(this.tileTo[0], this.tileTo[1])].eventEnter != null) {\n\t\t\tmapTileData.map[toIndex(this.tileTo[0], this.tileTo[1])].eventEnter(this);\n        }\n\t} else {\n        // current position on canvas\n\t\tthis.position[0] = (this.tileFrom[0] * tileWidth) + ((tileWidth - this.dimensions[0]) / 2);\n\t\tthis.position[1] = (this.tileFrom[1] * tileHeight) + ((tileHeight - this.dimensions[1]) / 2);\n\n        // if char is moving on x coordinate, calculate pixels\n\t\tif(this.tileTo[0] != this.tileFrom[0]) {\n            // difference = distance moved\n            // 加减移动的地砖到角色的位子\n\t\t\tlet difference = (tileWidth / this.delayMove) * (t - this.timeMoved);\n\t\t\tthis.position[0]+= (this.tileTo[0] < this.tileFrom[0] ? 0 - difference : difference);\n\t\t}\n\t    if(this.tileTo[1] != this.tileFrom[1]) {\n\t\t\tlet difference = (tileHeight / this.delayMove) * (t-this.timeMoved);\n\t\t\tthis.position[1]+= (this.tileTo[1]<this.tileFrom[1] ? 0 - difference : difference);\n        }\n        // round x & y to whole number 需要整数\n\t\tthis.position[0] = Math.round(this.position[0]);\n\t\tthis.position[1] = Math.round(this.position[1]);\n    }\n    // true = char is currently moving\n\treturn true;\n}\n\n\n// if char can move in a specific direc\nMiuMiu.prototype.placesCanGo = function(x, y) {\n    // if x and y is in map bound\n    if(x < 0 || x >= mapWidth || y < 0 || y >= mapHeight) { \n\t\treturn false; \n\t}\n    // if the tile is path tile (only move if its a path)\n        if(tileTypes[gameMap[toIndex(x,y)]].floor != floorTypes.path) { return false; }\n        if(mapTileData.map[toIndex(x,y)].object != null) {\n\t\t\tlet object = mapTileData.map[toIndex(x,y)].object;\n\t\t\tif(objectTypes[object.type].collision == collisions.solid) {\n\t\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\nMiuMiu.prototype.canGoUp = function() { return this.placesCanGo(this.tileFrom[0], this.tileFrom[1] - 1); };\nMiuMiu.prototype.canGoDown = function() { return this.placesCanGo(this.tileFrom[0], this.tileFrom[1] + 1); };\nMiuMiu.prototype.canGoLeft = function() { return this.placesCanGo(this.tileFrom[0]-1, this.tileFrom[1]); };\nMiuMiu.prototype.canGoRight = function() { return this.placesCanGo(this.tileFrom[0]+1, this.tileFrom[1]); };\n\nMiuMiu.prototype.goLeft = function(t) { this.tileTo[0]-= 1; this.timeMoved = t; this.direction = directions.left; };\nMiuMiu.prototype.goRight = function(t) { this.tileTo[0]+= 1; this.timeMoved = t; this.direction = directions.right; };\nMiuMiu.prototype.goUp = function(t) { this.tileTo[1]-= 1; this.timeMoved = t; this.direction = directions.up; };\nMiuMiu.prototype.goDown = function(t) { this.tileTo[1]+= 1; this.timeMoved = t; this.direction = directions.down; };\n\n// pick up item\nMiuMiu.prototype.pickUp = function()\n{\n\tif(this.tileTo[0]!=this.tileFrom[0] ||\n\t\tthis.tileTo[1]!=this.tileFrom[1])\n\t{\n\t\treturn false;\n\t}\n\t\n\tlet is = mapTileData.map[toIndex(this.tileFrom[0],\n\t\t\t\tthis.tileFrom[1])].itemStack;\n\t\n\tif(is!=null)\n\t{\n\t\tlet remains = this.inventory.addItems(is.type, is.qty);\n\n\t\tif(remains) { is.qty = remains; }\n\t\telse\n\t\t{\n\t\t\tmapTileData.map[toIndex(this.tileFrom[0],\n\t\t\t\tthis.tileFrom[1])].itemStack = null;\n\t\t}\n\t}\n\t\n\treturn true;\n};\n\n// create a camera object\nlet camera = {\n    screen: [0,0],\n    // 画面左上角\n    startingPoint: [0,0],\n    // 画面右下角\n    endingPoint: [0,0],\n    // 误差\n    offset: [0,0],\n    // update function, x y is our center area\n    update: function(offsetX, offsetY) {\n        // offset: half the canvas width || height (round down to whole num)\n\t\tthis.offset[0] = Math.floor((this.screen[0]/2) - offsetX);\n        this.offset[1] = Math.floor((this.screen[1]/2) - offsetY);\n\n        // 地砖在地图上的位置\n        let tile = [ Math.floor(offsetX / tileWidth), Math.floor(offsetY / tileHeight) ];\n        //  计算第一个地砖位置在x线上： 最大地砖数量 - 屏幕的一半\n        //  多减去1这样地砖可以show一半在屏幕上\n        this.startingPoint[0] = tile[0] - Math.ceil((this.screen[0]/2) / tileWidth)  - 1;\n\t\tthis.startingPoint[1] = tile[1] - Math.ceil((this.screen[1]/2) / tileHeight)  - 1;\n\n        // 确保x和y都大于0要么会在地图外\n        if(this.startingPoint[0] <= -1) { this.startingPoint[0] = 0; }\n\t\tif(this.startingPoint[1] <= -1) { this.startingPoint[1] = 0; }\n\n        this.endingPoint[0] = tile[0] + 1 + Math.ceil((this.screen[0]/2) / tileWidth);\n\t\tthis.endingPoint[1] = tile[1] + 1 + Math.ceil((this.screen[1]/2) / tileHeight);\n\n\t\tif(this.endingPoint[0] >= mapWidth) { this.endingPoint[0] = mapWidth -1; }\n\t\tif(this.endingPoint[1] >= mapHeight) { this.endingPoint[1] = mapHeight - 1; }\n        }\n};\n\n\n// buildings\n\nlet mapTileData = new TileMap();\n\nlet buildingsLocation = [\n\t{ x:11, y:5, w:4, h:5, data: [\n\t\t10, 11, 11, 12,\n        13, 14, 14, 15,\n        16, 18, 16, 18,\n        16, 18, 16, 18,\n        16, 17, 16, 18\n\t]},\n\t{ x:16, y:5, w:7, h:5, data: [\n\t\t10, 11, 11, 11, 11, 12, 12,\n        13, 15, 13, 14, 14, 15, 15,\n        16, 18, 16, 19, 19, 18, 18,\n        16, 18, 16, 19, 19, 18, 18,\n        16, 18, 16, 19, 17, 18, 18\n\t]},\n\t{ x:14, y:13, w:4, h:4, data: [\n        10, 11, 11, 12,\n        13, 14, 14, 15,\n        16, 18, 16, 18,\n        16, 17, 16, 18\n\t]}\n];\n\n// stores information for each map tile\nfunction Tile(tileX, tileY, tileType)\n{\n    // tileY, tileX = the position of the tile on the map\n\tthis.x\t\t\t= tileX;\n\tthis.y\t\t\t= tileY;\n\tthis.type\t\t= tileType;\n\tthis.building\t\t= null;\n    this.buildingType\t= 0;\n    //  pointer to a function to execute when a MiuMiu has completed moving on to this tile\n    this.eventEnter\t= null;\n\tthis.object\t\t= null;\n\tthis.itemStack\t= null;\n\n}\n\n// 储存管理地图数据\nfunction TileMap() {\n\tthis.map\t= [];\n\tthis.w\t\t= 0;\n    this.h\t\t= 0;\n\tthis.levels\t= 4;\n}\n\nTileMap.prototype.buildMapFromData = function(tileId, w, h) {\n\tthis.w\t\t= w;\n    this.h\t\t= h;\n\n    if(tileId.length!=(w * h)) { return false; }\n\t\n    this.map.length\t= 0;\n    \tfor(let y = 0; y < h; y++) {\n\t\t    for(let x = 0; x < w; x++) {\n\t\t\tthis.map.push( new Tile(x, y, tileId[ (x + (w * y))]) );\n\t\t}\n    }\n    return true;\n};\n\n\nTileMap.prototype.addBuildings = function(buildings) {\n\tfor(let i in buildings) {\n        let building = buildings[i];\n        if(building.x < 0 || building.y < 0 || building.x >= this.w || building.y >= this.h ||\t(building.x+building.w)>this.w || (building.y+building.h)>this.h || building.data.length!=(building.w*building.h)) {\n\t\t\tcontinue;\n        }\n        for(let y = 0; y < building.h; y++) {\n\t\t\tfor(let x = 0; x < building.w; x++) {\n                let tileIdx = (((building.y + y) * this.w) + building.x + x);\n                this.map[tileIdx].building = building;\n\t\t\t\tthis.map[tileIdx].buildingType = building.data[( (y * building.w) + x)];\n\t\t\t}\n\t\t}\n\t}\n};\n\n// 物品摆放\nfunction GameObjects(nt) {\n\tthis.x = 0;\n\tthis.y = 0;\n\tthis.type = nt;\n}\n\nGameObjects.prototype.placeAt = function(nx, ny) {\n\tif(mapTileData.map[toIndex(this.x, this.y)].object == this) {\n\t\tmapTileData.map[toIndex(this.x, this.y)].object = null;\n    }\n    this.x = nx;\n\tthis.y = ny;\n\t\n\tmapTileData.map[toIndex(nx, ny)].object = this;\n};\n\n\n\n// convert x, y into index in gameMap arr\nfunction toIndex(x, y) {\n\treturn(x + (mapWidth * y));\n}\n\nfunction getFrame(sprite, timeLast, time, animation) {\n\tif(!animation) { return sprite[0]; }\n\ttime = time % timeLast;\n\n\tfor(x in sprite) {\n\t\tif(sprite[x].end>=time) { return sprite[x]; }\n\t}\n}\n\n// 界面load完，开始loop\nwindow.onload = function() {\n\tctx = document.getElementById(\"miumiuTale\").getContext(\"2d\");\n\trequestAnimationFrame(drawGame);\n    \n    // add eventListeners for the keydowna and keyup\n\twindow.addEventListener(\"keydown\", function(e) {\n\t\tif(e.keyCode >= 65 && e.keyCode <= 87 ) { heldKeys[e.keyCode] = true; }\n\t\tif(e.keyCode == 13) { heldKeys[e.keyCode] = true; }\n\t});\n\twindow.addEventListener(\"keyup\", function(e) {\n\t\tif(e.keyCode == 13) { heldKeys[e.keyCode] = false; }\n\t\tif(e.keyCode >= 65 && e.keyCode <= 87) { heldKeys[e.keyCode] = false; }\n\t\t\n\t});\n\n    // canvas尺寸 保存到 相机\n    camera.screen = [document.getElementById(\"miumiuTale\").width,\n        document.getElementById(\"miumiuTale\").height];\n        \n    gametile = new Image();\n\tgametile.onerror = function() {\n\t\tctx = null;\n\t\talert(\"Failed loading gametile.\");\n\t};\n\tgametile.onload = function() { \n\t\tartLoaded = true; \n\t};\n    gametile.src = gametileURL;\n    \n    mapTileData.buildMapFromData(gameMap, mapWidth, mapHeight);\n\tmapTileData.addBuildings(buildingsLocation);\n\tmapTileData.map[((2 * mapWidth) + 2)].eventEnter = function() { \n\t\tconsole.log(\"Entered tile 2,2\"); \n\t};\n\t\n\t// 物品摆放位置\n\tlet fence1 = new GameObjects(2); fence1.placeAt(15, 6);\n    \n    let flower1 = new GameObjects(1); flower1.placeAt(11, 10);\n    let flower2 = new GameObjects(1); flower2.placeAt(13, 10);\n    let flower3 = new GameObjects(1); flower3.placeAt(14, 10);\n    \n\tlet tree1 = new GameObjects(3); tree1.placeAt(10, 11);\n\tlet tree2 = new GameObjects(3); tree2.placeAt(15, 11);\n\tlet tree3 = new GameObjects(3); tree3.placeAt(13, 11);\t\n    let tree4 = new GameObjects(3); tree4.placeAt(18, 11);\n  \n    let mashroom1 = new GameObjects(4); mashroom1.placeAt(8,9);\n    let mashroom2 = new GameObjects(4); mashroom2.placeAt(15,7);\n\n\tlet pigShop1 = new GameObjects(5); pigShop1.placeAt(9, 9);\n\n\n    let donuts = new GameObjects(6); donuts.placeAt(11, 5);\n\n    let cooking = new GameObjects(7); cooking.placeAt(13, 5);\n\n    let carpet = new GameObjects(8); carpet.placeAt(13,7);\n\n    let desk = new GameObjects(9); desk.placeAt(14,8);\n\n    let chair = new GameObjects(10); chair.placeAt(14,7);\n    let chair2 = new GameObjects(16); chair2.placeAt(18,7);\n\n    let treePlant = new GameObjects(11); treePlant.placeAt(11,8);\n\n    let drum = new GameObjects(12); drum.placeAt(21,6);\n\n    let instruments = new GameObjects(13); instruments.placeAt(18,5);\n\n    let bookShelf1 = new GameObjects(14); bookShelf1.placeAt(16,6);\n    let bookShelf2 = new GameObjects(14); bookShelf2.placeAt(16,7);\n\n\tlet saxophone = new GameObjects(15); saxophone.placeAt(19,7);\n\t\n\tlet coconutTree1 = new GameObjects(17); coconutTree1.placeAt(10, 18);\n\tlet coconutTree2 = new GameObjects(17); coconutTree2.placeAt(14, 19);\n\tlet coconutTree3 = new GameObjects(17); coconutTree3.placeAt(18, 18);\n\tlet coconutTree4 = new GameObjects(17); coconutTree4.placeAt(22, 19);\n\n\n\tlet coconut1 = new PlacedItemStack(1, 1); coconut1.placeAt(10, 20);\n\tlet coconut2 = new PlacedItemStack(1, 1); coconut2.placeAt(15, 20);\n\tlet coconut3 = new PlacedItemStack(1, 1); coconut3.placeAt(23, 20);\n\tlet coconut4 = new PlacedItemStack(1, 1); coconut4.placeAt(14, 21);\n\n\tlet strawberry1 = new PlacedItemStack(2, 1); strawberry1.placeAt(18, 22);\n\t\n};\n\n\n\n\n// main function\nfunction drawGame() {\n    if (ctx == null) { \n\t\treturn; \n\t}\n    if (!artLoaded) { \n\t\trequestAnimationFrame(drawGame); return; \n\t}\n\n\tlet currentFrameTime = Date.now();\n    // framecount \n\tlet sec = Math.floor(Date.now() / 1000);\n\tif(sec != currentSecond){\n\t\tcurrentSecond = sec;\n\t\tframesLastSecond = frameCount;\n\t\tframeCount = 1;\n\t} else { \n        frameCount++; \n    }\n\n    // miumiu movement\n\tif(!miumiu.processMovement(currentFrameTime)) {\n\t\tif(heldKeys[87] && miumiu.canGoUp()){ \n            miumiu.goUp(currentFrameTime); \n        } else if (heldKeys[83] && miumiu.canGoDown()) { \n            miumiu.goDown(currentFrameTime); \n        } else if(heldKeys[65] && miumiu.canGoLeft()) { \n            miumiu.goLeft(currentFrameTime); \n        } else if(heldKeys[68] && miumiu.canGoRight()) { \n            miumiu.goRight(currentFrameTime); \n        } else if(heldKeys[13]) {\n\t\t\tmiumiu.pickUp();\n\t\t}\n    }\n\n    // camera跟着miumiu走\n        camera.update(miumiu.position[0] + (miumiu.dimensions[0] / 2),\n            miumiu.position[1] + (miumiu.dimensions[1] / 2));\n\n\t    let miumiuBuilding1 = mapTileData.map[toIndex(\n\t\tmiumiu.tileFrom[0], miumiu.tileFrom[1])].building;\n\t    let miumiuBuilding2 = mapTileData.map[toIndex(\n\t\tmiumiu.tileTo[0], miumiu.tileTo[1])].building;\n\n        // 清除last frame\n        ctx.fillStyle = \"#000000\";\n        ctx.fillRect(0, 0, camera.screen[0], camera.screen[1]);\n    \n\n    for(let z = 0; z < mapTileData.levels; z++) {\n\t\tfor(let y = camera.startingPoint[1]; y <= camera.endingPoint[1]; ++y) {\n\t\t    for(let x = camera.startingPoint[0]; x <= camera.endingPoint[0]; ++x) {\n                if(z==0) {\n\t\t\t\t\tlet tile = tileTypes[mapTileData.map[toIndex(x,y)].type];\n\n\t\t\t\t\tctx.drawImage(gametile, \n\t\t\t\t\t\t\t\t\ttile.sprite[0].x, \n\t\t\t\t\t\t\t\t\ttile.sprite[0].y, \n\t\t\t\t\t\t\t\t\ttile.sprite[0].w, \n\t\t\t\t\t\t\t\t\ttile.sprite[0].h,\n\t\t\t\t\t\t\t\t\tcamera.offset[0] + (x * tileWidth), \n\t\t\t\t\t\t\t\t\tcamera.offset[1] + (y * tileHeight), \n\t\t\t\t\t\t\t\t\ttileWidth, \n\t\t\t\t\t\t\t\t\ttileHeight\n\t\t\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if(z==1)\n\t\t\t{\n\t\t\t\tlet is = mapTileData.map[toIndex(x,y)].itemStack;\n\t\t\t\tif(is!=null)\n\t\t\t\t{\n\t\t\t\t\tlet objectSprite = itemTypes[is.type].sprite;\n\t\t\t\t\t\n\t\t\t\t\tctx.drawImage(gametile,\n\t\t\t\t\t\tobjectSprite[0].x, objectSprite[0].y,\n\t\t\t\t\t\tobjectSprite[0].w, objectSprite[0].h,\n\t\t\t\t\t\tcamera.offset[0] + (x*tileWidth) + itemTypes[is.type].offset[0],\n\t\t\t\t\t\tcamera.offset[1] + (y*tileHeight) + itemTypes[is.type].offset[1],\n\t\t\t\t\t\tobjectSprite[0].w, objectSprite[0].h);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\tlet object = mapTileData.map[toIndex(x,y)].object;\n\t\t\t\tif(object != null && objectTypes[object.type].zIndex == z) {\n\t\t\t\t\tlet objectType = objectTypes[object.type];\n\t\t\t\t \n\t\t\t\t\tctx.drawImage(gametile,\n\t\t\t\t\t\t\t\tobjectType.sprite[0].x, \n\t\t\t\t\t\t\t\tobjectType.sprite[0].y,\n\t\t\t\t\t\t\t\tobjectType.sprite[0].w, \n\t\t\t\t\t\t\t\tobjectType.sprite[0].h,\n\t\t\t\t\t\t\t\tcamera.offset[0] + (x * tileWidth) + objectType.offset[0],\n\t\t\t\t\t\t\t\tcamera.offset[1] + (y * tileHeight) + objectType.offset[1],\n\t\t\t\t\t\t\t\tobjectType.sprite[0].w, \n\t\t\t\t\t\t\t\tobjectType.sprite[0].h\n\t\t\t\t\t\t\t\t);\n\t\t\t\t}\n\n               if(z == 2 && mapTileData.map[toIndex(x,y)].buildingType != 0 && mapTileData.map[toIndex(x,y)].building != miumiuBuilding1 && mapTileData.map[toIndex(x,y)].building != miumiuBuilding2) {\n                    tile = tileTypes[mapTileData.map[toIndex(x,y)].buildingType];\n                    sprite = getFrame(tile.sprite, tile.spritetimeLast, tile.animation);\n\t\t\t\t\tctx.drawImage(gametile, \n\t\t\t\t\t\t\t\t\tsprite.x, \n\t\t\t\t\t\t\t\t\tsprite.y, \n\t\t\t\t\t\t\t\t\tsprite.w, \n\t\t\t\t\t\t\t\t\tsprite.h, \n\t\t\t\t\t\t\t\t\tcamera.offset[0] + (x * tileWidth), \n\t\t\t\t\t\t\t\t\tcamera.offset[1] + (y * tileHeight), \n\t\t\t\t\t\t\t\t\ttileWidth, \n\t\t\t\t\t\t\t\t\ttileHeight);\n\t\t\t\t}\n\t\t\t}\n    \t}\n\n\t\tif (z == 1) {\n\t\t\t\tlet sprite = miumiu.sprites[miumiu.direction];\n\t\t\t\tctx.drawImage(gametile,\n\t\t\t\t\tsprite[0].x, sprite[0].y,\n\t\t\t\t\tsprite[0].w, sprite[0].h,\n\t\t\t\t\tcamera.offset[0] + miumiu.position[0],\n\t\t\t\t\tcamera.offset[1] + miumiu.position[1],\n\t\t\t\t\tmiumiu.dimensions[0], miumiu.dimensions[1]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t}\n\n\tctx.textAlign = \"right\";\n\t// inventory\n\tfor(let i = 0; i < miumiu.inventory.spaces; i++){\n\t\tctx.fillStyle = \"#ffc34a\";\n\t\tctx.fillRect(10 + (i * 50), 350,\n\t\t\t40, 40);\n\t\t\n\t\tif(typeof miumiu.inventory.stacks[i] != 'undefined'){\n\t\t\tlet it = itemTypes[miumiu.inventory.stacks[i].type];\n\t\t\tlet sprite = it.sprite;\n\t\t\t\t\t\n\t\t\tctx.drawImage(gametile,\n\t\t\t\tsprite[0].x, sprite[0].y,\n\t\t\t\tsprite[0].w, sprite[0].h,\n\t\t\t\t10 + (i * 50) + it.offset[0],\n\t\t\t\t350 + it.offset[1],\n\t\t\t\tsprite[0].w, sprite[0].h);\n\t\t\t\n\t\t\tif(miumiu.inventory.stacks[i].qty > 1){\n\t\t\t\tctx.fillStyle = \"#000000\";\n\t\t\t\tctx.fillText(\n\t\t\t\t\t\"\" + miumiu.inventory.stacks[i].qty,\n\t\t\t\t\t10 + (i * 50) + 38,\n\t\t\t\t\t350 + 38\n\t\t\t\t\t);\n\t\t\t}\n\t\t\tif (miumiu.inventory.stacks[i].qty == 4) {\n\t\t\t\talert(\"YOU FOUND ALL COCONUTS\");\n\t\t\t\tdocument.location.reload();\n\t\t\t\tclearInterval(interval);\n\t\t\t}\n\t\t}\n\t}\n\tctx.textAlign = \"left\";\n    \n    // draw the miumiu\n    let sprite = miumiu.sprites[miumiu.direction];\n\tctx.drawImage(gametile, \n\t\t\t\tsprite[0].x, \n\t\t\t\tsprite[0].y, \n\t\t\t\tsprite[0].w, \n\t\t\t\tsprite[0].h, \n\t\t\t\tcamera.offset[0] + miumiu.position[0], \n\t\t\t\tcamera.offset[1] + miumiu.position[1], \n\t\t\t\tmiumiu.dimensions[0], miumiu.dimensions[1]);\n\n\tlastFrameTime = currentFrameTime;\n\trequestAnimationFrame(drawGame);\n}\n"],"sourceRoot":""}